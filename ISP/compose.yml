services:
  dns:
    build:
      context: ./dns
      dockerfile: Dockerfile
    ports:
      - "53:53/udp"
      - "53:53/tcp"
    networks:
      - isp
  
  portal:
    image: nginx:alpine
    volumes:
      - ./portal:/usr/share/nginx/html:ro
    networks:
      - isp
    
  proxy_isp:
    build:
      context: ./proxy
      dockerfile: dockerfile
    ports:
      - "80:80/tcp"
      - "443:443/tcp"
    networks:
      - isp
      - c1
      - c2
      - c3

networks:
    isp:
      external: true
    c2:
      external: true
    c3:
      external: true
    c1:
      external: true