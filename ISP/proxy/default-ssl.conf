<VirtualHost *:443>
	ServerName portal.bye.br
    
    SSLEngine on

	SSLCertificateFile      /etc/ssl/certs/ISP.crt
	SSLCertificateKeyFile   /etc/ssl/private/ISP.key

    ProxyPreserveHost On
    ProxyRequests off
    ProxyAddHeaders On
    SSLProxyEngine off

    ProxyPass / http://portal:80/
	  ProxyPassReverse / http://portal:80/


	<FilesMatch "\.(?:cgi|shtml|phtml|php)$">
		SSLOptions +StdEnvVars
	</FilesMatch>
	<Directory /usr/lib/cgi-bin>
		SSLOptions +StdEnvVars
	</Directory>
</VirtualHost>

<VirtualHost *:443>
	ServerName mail.bye.br
    RewriteEngine On

    SSLEngine on

	SSLCertificateFile      /etc/ssl/certs/ISP.crt
	SSLCertificateKeyFile   /etc/ssl/private/ISP.key

    ProxyPreserveHost On
    ProxyRequests off
    ProxyAddHeaders On
    SSLProxyEngine off

		<Proxy *>
			Order deny,allow
			Allow from all
		</Proxy>

		Header always set Content-Security-Policy "default-src 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https: data:; frame-ancestors 'none';"

	RewriteRule ^/(.*)$ http://webmail:80/$1 [P,L]


	<FilesMatch "\.(?:cgi|shtml|phtml|php)$">
		SSLOptions +StdEnvVars
	</FilesMatch>
	<Directory /usr/lib/cgi-bin>
		SSLOptions +StdEnvVars
	</Directory>
</VirtualHost>

<VirtualHost *:443>
    ServerName portal.cliente1.br
	ServerAlias *.cliente1.br
    RewriteEngine On
    
    SSLEngine on

	SSLCertificateFile      /etc/ssl/certs/C1.crt
	SSLCertificateKeyFile   /etc/ssl/private/C1.key

	ProxyPreserveHost On
    ProxyRequests off
    ProxyAddHeaders On
    SSLProxyEngine off
			<Proxy *>
			Order deny,allow
			Allow from all
		</Proxy>

		Header always set Content-Security-Policy "default-src 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https: data:; frame-ancestors 'none';"

    RewriteRule ^/(.*)$ http://proxy_c1:80/$1 [P,L]


	<FilesMatch "\.(?:cgi|shtml|phtml|php)$">
		SSLOptions +StdEnvVars
	</FilesMatch>
	<Directory /usr/lib/cgi-bin>
		SSLOptions +StdEnvVars
	</Directory>
</VirtualHost>

<VirtualHost *:443>
  ServerName portal.cliente2.br
	ServerAlias *.cliente2.br
    RewriteEngine On
    
  SSLEngine on

	SSLCertificateFile      /etc/ssl/certs/C2.crt
	SSLCertificateKeyFile   /etc/ssl/private/C2.key

		ProxyPreserveHost On
    ProxyRequests off
    ProxyAddHeaders On
    SSLProxyEngine off

		<Proxy *>
			Order deny,allow
			Allow from all
		</Proxy>

		Header always set Content-Security-Policy "default-src 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https: data:; frame-ancestors 'none';"

    RewriteRule ^/(.*)$ http://proxy_c2:80/$1 [P,QSA,L]


	<FilesMatch "\.(?:cgi|shtml|phtml|php)$">
		SSLOptions +StdEnvVars
	</FilesMatch>
	<Directory /usr/lib/cgi-bin>
		SSLOptions +StdEnvVars
	</Directory>
</VirtualHost>

<VirtualHost *:443>
    ServerName portal.cliente3.br
	ServerAlias *.cliente3.br
    RewriteEngine On
    
    SSLEngine on

	SSLCertificateFile      /etc/ssl/certs/C3.crt
	SSLCertificateKeyFile   /etc/ssl/private/C3.key

	ProxyPreserveHost On
    ProxyRequests off
    ProxyAddHeaders On
    SSLProxyEngine off

		<Proxy *>
			Order deny,allow
			Allow from all
		</Proxy>

		Header always set Content-Security-Policy "default-src 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https: data:; frame-ancestors 'none';"

    RewriteRule ^/(.*)$ http://proxy_c3:80/$1 [P,QSA,L]


	<FilesMatch "\.(?:cgi|shtml|phtml|php)$">
		SSLOptions +StdEnvVars
	</FilesMatch>
	<Directory /usr/lib/cgi-bin>
		SSLOptions +StdEnvVars
	</Directory>
</VirtualHost>
